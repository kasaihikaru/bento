<% provide :title, " | #{@user.nickname}さん" %>

<div class="container index-content">
  <div class="row">
    <div class="menu col-md-12 col-lg-2">
      <div class="wrapper">
        <div class="mypage-user">
          <a href="/users/<%= @user.id %>"><h3><%= @user.nickname %><br></h3>さんのページ</a>
        </div>
        <% if user_signed_in? && current_user.id == @user.id %>
          <div class="create-folder">
            <ul>
              <li>
                <input placeholder="新しいボックスを作成" type="text" value=""></input>
                <button class="btn btn-primary">
                  <i class="glyphicon glyphicon-inbox"></i>
                </button>
              </li>
            </ul>
          </div>
        <% end %>
      </div>
      <div class="folds-menu">
        <h4>ボックス一覧</h4>
        <ul>
          <li><a href="/users/<%= @user.id %>/likes">お気に入り一覧</a></li>
          <li><a href="/folds/1"></a>ドラマ</li>
          <li><a href="/folds/2"></a>TOEIC</li>
          <li><a href="/folds/3"></a>日常会話</li>
        </ul>
      </div>
    </div>


    <div class="main col-md-12 col-lg-10">
<!-- プロフィール -->
      <div class="wrapper-profile">
        <div class="profile clearfix">
          <div class="p-name">
            <%= @user.nickname %>
          </div>
          <% if @user.avatar? %>
            <div class="p-img">
              <%= image_tag(@user.avatar, :alt => "プロフィール画像") %>
            </div>
          <% end %>
          <div class="p-blog">
            <table>
              <tr>
                <th>ブログ、HP：</th>
                <td><a href="<%= @user.blog %>"><%= @user.blog %></a></td>
              </tr>
            </table>
          </div>
          <div class="p-intro">
            <dl>
              <dt>自己紹介：</dt>
              <dd><%= simple_format(@user.introduction) %></dd>
            </dl>
          </div>
          <% if user_signed_in? && current_user.id == @user.id %>
            <div class="p-edit">
              <a href="/users/edit"><button class="btn btn-default"><i class="glyphicon glyphicon-pencil"></i>編集</button></a>
            </div>
          <% end %>
        </div>
      </div>


<!-- 新しい文 -->
      <% if user_signed_in? && current_user.id == @user.id %>
        <div class="wrapper-createsentence">
          <div class="create-newsentence">
            <%= form_for (@sentence) do |s| %>
              <div class="form-group">
                <h3>新しい文を作成する</h3>
                <%= s.text_area :ja, placeholder: "文章(日本語)", class: "form-control", :required => true %>
                <%= s.text_area :en, placeholder: "文章(英語)", id: "englishsentence", class: "form-control", :required => true %>
              </div>


<!--               <div id="auto-words" class="btn btn-default">自動で単語を入力</div> -->



              <div class="form-group">
                <ul>
                  <%= render :partial => "wordform", :locals=>{:s=>s} %>
                  <div class="wrapper">
                  <button type="button" class="btn btn-default btn-sm" data-toggle="collapse" data-target="#more-words"><i class="glyphicon glyphicon-chevron-down"></i></button>
                  </div>
                  <div id="more-words" class="collapse">
                    <div class="panel panel-default">
                      <div class="panel-body">
                        <%= render :partial => "wordform", :locals=>{:s=>s} %>
                        <%= render :partial => "wordform", :locals=>{:s=>s} %>
                        <%= render :partial => "wordform", :locals=>{:s=>s} %>
                      </div>
                    </div>
                  </div>
                </ul>
              </div>
              <div class="form-group">
                <%= s.submit "作成", class: "btn btn-primary withripple" %>
              </div>
            <% end %>
          </div>
        </div>
      <% end %>


<!-- タイムライン -->
      <div class="post">
        <% @sentences.each.with_index(1) do |sentence, i| %>
          <div class="post">
            <div class="post-part">
              <table class="table table-bordered sentence-table">
                <thead>
                  <tr class="warning">
                  <th>
                    <div class="p-header">
                      <span class="index-name"><%= sentence.user.nickname %></span>
                      <time><%= time_ago_in_words sentence.created_at %></time>前
                      <div class="p-edit">
                        <% if user_signed_in? && current_user.id == @user.id %>
                          <a href="/sentences/<%= sentence.id %>/edit"><button class="btn btn-default">編集</button></a>
                          <button class="btn btn-default">消去</button>
                        <% end %>
                      </div>
                    </div>
                  </th>
                  </tr>
                </thead>
                <tbody>
                  <tr><th><%= simple_format(sentence.ja) %></th></tr>
                  <tr class="en_sentence"><th><%= simple_format(sentence.en) %></th></tr>
                </tbody>
              </table>
            </div>
            <div class="wrapper">
              <button type="button" class="btn btn-primary btn-sm" data-toggle="collapse" data-target="#words-open<%= i %>">Words</button>
            </div>
            <div id="words-open<%= i %>" class="collapse words-open">
              <div class="panel panel-default">
                <div class="panel-body">
                  <table class="table table-bordered words-table .table-responsive">
                    <thead>
                      <tr class="warning"><th>単語（日本語）</th><th>単語（英語）</th></tr>
                    </thead>
                    <tbody>
                      <% sentence.words.each do |word| %>
                        <tr>
                          <th><%= word.ja %></th>
                          <th><%= word.en %></th>
                        </tr>
                      <% end %>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        <% end %>
      </div>
      <%= paginate(@sentences) %>
    </div>
  </div>
</div>